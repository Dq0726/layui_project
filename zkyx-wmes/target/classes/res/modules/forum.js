layui.define(["table","form"],function(c){var f=layui.$,a=layui.admin,b=layui.view,e=layui.table,d=layui.form;e.render({elem:"#LAY-app-forum-list",url:"./res/json/forum/list.js",cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:true},{field:"poster",title:"发帖人"},{field:"avatar",title:"头像",width:100,templet:"#imgTpl"},{field:"content",title:"发帖内容"},{field:"posttime",title:"发帖时间",sort:true},{field:"top",title:"置顶",templet:"#buttonTpl",minWidth:80,align:"center"},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-forum-list"}]],page:true,limit:10,limits:[10,15,20,25,30],text:"对不起，加载出现异常！"});e.on("tool(LAY-app-forum-list)",function(h){var g=h.data;if(h.event==="del"){layer.confirm("确定删除此条帖子？",function(i){h.del();layer.close(i)})}else{if(h.event==="edit"){a.popup({title:"编辑帖子",area:["550px","450px"],id:"LAY-popup-forum-edit",resize:false,success:function(i,j){b(this.id).render("app/forum/listform",g).done(function(){d.render(null,"layuiadmin-form-list");d.on("submit(layuiadmin-app-forum-submit)",function(k){var l=k.field;layui.table.reload("LAY-app-forum-list");layer.close(j)})})}})}}});e.render({elem:"#LAY-app-forumreply-list",url:"./res/json/forum/replys.js",cols:[[{type:"checkbox",fixed:"left"},{field:"id",width:100,title:"ID",sort:true},{field:"replyer",title:"回帖人"},{field:"cardid",title:"回帖ID",sort:true},{field:"avatar",title:"头像",width:100,templet:"#imgTpl"},{field:"content",title:"回帖内容",width:200},{field:"replytime",title:"回帖时间",sort:true},{title:"操作",width:150,align:"center",fixed:"right",toolbar:"#table-forum-replys"}]],page:true,limit:10,limits:[10,15,20,25,30],text:"对不起，加载出现异常！"});e.on("tool(LAY-app-forumreply-list)",function(h){var g=h.data;if(h.event==="del"){layer.confirm("确定删除此条评论？",function(i){h.del();layer.close(i)})}else{if(h.event==="edit"){a.popup({title:"编辑回帖",area:["550px","400px"],id:"LAY-popup-forum-edit",resize:false,success:function(i,j){b(this.id).render("app/forum/replysform",g).done(function(){d.render(null,"layuiadmin-app-forum-reply");d.on("submit(layuiadmin-app-forumreply-submit)",function(k){var l=k.field;layui.table.reload("LAY-app-forumreply-list");layer.close(j)})})}})}}});c("forum",{})});