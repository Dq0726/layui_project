layui.define("view",function(F){var x=layui.jquery;var D=layui.laytpl;var l=layui.table;var h=layui.element;var g=layui.util;var r=layui.upload;var z=layui.form;var C=layui.setter;var c=layui.view;var H=layui.device();var u=x(window);var I=x(document);var w=x("body");var y=x("#"+C.container);var b="layui-show";var f="layui-hide";var n="layui-this";var v="layui-disabled";var s="template";var k="#LAY_app_body";var a="LAY_app_flexible";var E="layadmin-layout-tabs";var J="layadmin-side-spread-sm";var A="layadmin-tabsbody-item";var G="layui-icon-shrink-right";var p="layui-icon-spread-left";var e="layadmin-side-shrink";var m="layui-side-scroll";var d="LAY-system-side-menu";var o={v:"2.6.0",mode:"spa",req:c.req,exit:c.exit,escape:g.escape,on:function(K,L){return layui.onevent.call(this,C.MOD_NAME,K,L)},popup:c.popup,popupRight:function(K){return o.popup.index=layer.open(x.extend({type:1,id:"LAY_adminPopupR",anim:-1,title:false,closeBtn:false,offset:"r",shade:0.1,shadeClose:true,skin:"layui-anim layui-anim-rl layui-layer-adminRight",area:"300px"},K))},renderMenuItems:function(O){var M=layui.hash();var Q=M.path;var L=Q.join("/");var K=layui.setter.response.dataName;var P="children";return(function N(U,T){T=T||"li";var R=[];var S=T==="li";layui.each(U||O[K],function(aa,ab){var W=typeof ab[P]==="object"&&ab[P].length>0;var Z=ab.component||"";var Y=S?"layui-nav-item":"";var X=function(){var ac=(!U&&aa==0&&!Q[0])||(L===Z)||ab.spread;return ac?(W?"layui-nav-itemed":"layui-this"):""};var V=function(){return W?'<dl class="layui-nav-child">'+N(ab[P],"dd")+"</dl>":""};R.push(["<"+T+' class="'+Y+" "+X()+'">','<a href="javascript:;"'+function(){var ac=[];if(!W){ac.push('lay-href="'+Z+'"')}if(ab.pageMode){ac.push('lay-page-mode="'+ab.pageMode+'"')}if(S){ac.push('lay-tips="'+ab.meta.title+'"');ac.push('lay-direction="2"')}return ac.length?" "+ac.join(""):""}()+">",'<i class="layui-icon '+(ab.meta.icon||"")+'"></i>',"<cite>"+(ab.meta.title||"未命名")+"</cite>","</a>",V(),"</"+T+">"].join(""))});return R.join("")})()},setSideMenuStatus:function(M){M=M||layui.hash();var P=x("#"+d);var K="layui-nav-item";var O="layui-nav-itemed";var N=function(Q){Q.addClass(O).siblings().removeClass(O)};var L=function(R){var Q=M.path.join("/");R.find("li,dd").each(function(W,X){var Y=x(this);var Z=Y.children("a");var V=o.correctRouter(Z.attr("lay-href"));var S=V===M.href||V===Q||function(){var aa=layui.hash("#"+V);var ab=aa.path.join("/");return M.href.indexOf(ab)!==-1}();if(S){R.find("."+n).removeClass(n);Y.addClass(n);var U=Y.closest("."+K);var T=Y.parent().closest("dd");N(U);N(T);g.toVisibleArea({scrollElem:y.find("."+m),thisElem:Y})}})};P.find("."+n).removeClass(n);if(o.screen()<2){o.sideFlexible()}L(P)},sendAuthCode:function(L){L=x.extend({seconds:60,elemPhone:"#LAY_phone",elemVercode:"#LAY_vercode"},L);var N=L.seconds,M=null,O,K=function(P){var Q=x(L.elem);N--;if(N<0){Q.removeClass(v).html("获取验证码");N=L.seconds;clearInterval(O)}else{Q.addClass(v).html(N+"秒后重获")}if(!P){O=setInterval(function(){K(true)},1000)}};w.off("click",L.elem).on("click",L.elem,function(){L.elemPhone=x(L.elemPhone);L.elemVercode=x(L.elemVercode);var R=L.elemPhone,P=R.val();if(N!==L.seconds||x(this).hasClass(v)){return}if(!/^1\d{10}$/.test(P)){R.focus();return layer.msg("请输入正确的手机号")}if(typeof L.ajax==="object"){var Q=L.ajax.success;delete L.ajax.success}o.req(x.extend(true,{url:"",type:"get",data:{phone:P},success:function(S){layer.msg("验证码已发送至你的手机，请注意查收",{icon:1,shade:0});L.elemVercode.focus();K();Q&&Q(S)}},L.ajax))})},screen:function(){var K=u.width();if(K>1200){return 3}else{if(K>992){return 2}else{if(K>768){return 1}else{return 0}}}},sideFlexible:function(K){var N=y,M=x("#"+a),L=o.screen();if(K==="spread"){M.removeClass(p).addClass(G);if(L<2){N.addClass(J)}else{N.removeClass(J)}N.removeClass(e)}else{M.removeClass(G).addClass(p);if(L<2){N.removeClass(e)}else{N.addClass(e)}N.removeClass(J)}layui.event.call(this,C.MOD_NAME,"side({*})",{status:K})},resizeTable:function(K){var L=this,M=function(){L.tabsBody(o.tabsPage.index).find(".layui-table-view").each(function(){var N=x(this).attr("lay-id");layui.table.resize(N)})};if(!layui.table){return}K?setTimeout(M,K):M()},theme:function(K){var O=C.theme;var L=layui.data(C.tableName);var Q="LAY_layadmin_theme";var N=document.getElementById(Q);var M=document.createElement("style");if(K.CLEAR){x(N).remove();return layui.data(C.tableName,{key:"theme",remove:true})}var P=D([".layui-side-menu,",".layui-layer-admin .layui-layer-title,",".layadmin-side-shrink .layui-side-menu .layui-nav>.layui-nav-item>.layui-nav-child","{background-color:{{d.color.main}} !important;}",".layadmin-pagetabs .layui-tab-title li:after,",".layadmin-pagetabs .layui-tab-title li.layui-this:after,",".layui-nav-tree .layui-this,",".layui-nav-tree .layui-this>a,",".layui-nav-tree .layui-nav-child dd.layui-this,",".layui-nav-tree .layui-nav-child dd.layui-this a,",".layui-nav-tree .layui-nav-bar","{background-color:{{d.color.selected}} !important;}",".layui-layout-admin .layui-logo{background-color:{{d.color.logo || d.color.main}} !important;}",".layadmin-pagetabs .layui-tab-title li:hover,",".layadmin-pagetabs .layui-tab-title li.layui-this","{color: {{d.color.selected}} !important;}","{{# if(d.color.header){ }}",".layui-layout-admin .layui-header{background-color:{{ d.color.header }};}",".layui-layout-admin .layui-header a,",".layui-layout-admin .layui-header a cite{color: #f8f8f8;}",".layui-layout-admin .layui-header a:hover{color: #fff;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-more{border-top-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-nav-mored{border-color: transparent; border-bottom-color: #fbfbfb;}",".layui-layout-admin .layui-header .layui-nav .layui-this:after, .layui-layout-admin .layui-header .layui-nav-bar{background-color: #fff; background-color: rgba(255,255,255,.5);}",".layadmin-pagetabs .layui-tab-title li:after{display: none;}","{{# } }}"].join("")).render(K=x.extend({},L.theme,K));if("styleSheet" in M){M.setAttribute("type","text/css");M.styleSheet.cssText=P}else{M.innerHTML=P}M.id=Q;N&&w[0].removeChild(N);w[0].appendChild(M);K.color&&w.attr("layadmin-themealias",K.color.alias);L.theme=L.theme||{};layui.each(K,function(R,S){L.theme[R]=S});layui.data(C.tableName,{key:"theme",value:L.theme})},initTheme:function(K){var L=C.theme;K=K||0;if(L.color[K]){L.color[K].index=K;o.theme({color:L.color[K]})}},tabsPage:{},tabsHeader:function(K){return x("#LAY_app_tabsheader").children("li").eq(K||0)},tabsBody:function(K){return x(k).find("."+A).eq(K||0)},tabsBodyChange:function(K){o.tabsHeader(K).attr("lay-attr",layui.hash().href);o.tabsBody(K).addClass(b).siblings().removeClass(b);q.rollPage("auto",K)},resize:function(M){var K=layui.hash();var L=K.path.join("-");if(o.resizeFn[L]){u.off("resize",o.resizeFn[L]);delete o.resizeFn[L]}if(M==="off"){return}M(),o.resizeFn[L]=M;u.on("resize",o.resizeFn[L])},resizeFn:{},runResize:function(){var K=layui.hash();var L=K.path.join("-");o.resizeFn[L]&&o.resizeFn[L]()},delResize:function(){this.resize("off")},closeThisTabs:function(){if(!o.tabsPage.index){return}x(B).eq(o.tabsPage.index).find(".layui-tab-close").trigger("click")},fullScreen:function(){var K=document.documentElement,L=K.requestFullscreen||K.webkitRequestFullScreen||K.mozRequestFullScreen||K.msRequestFullscreen;if(typeof L!=="undefined"&&L){L.call(K)}},exitScreen:function(){var K=document.documentElement;if(document.exitFullscreen){document.exitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.webkitCancelFullScreen){document.webkitCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}},correctRouter:function(K){if(!/^\//.test(K)){K="/"+K}return K.replace(/^(\/+)/,"/").replace(new RegExp("/"+C.entry+"$"),"/")}};var q=o.events={flexible:function(M){var L=M.find("#"+a),K=L.hasClass(p);o.sideFlexible(K?"spread":null);o.resizeTable(350)},refresh:function(){o.render()},serach:function(K){K.off("keypress").on("keypress",function(M){if(!this.value.replace(/\s/g,"")){return}if(M.keyCode===13){var L=K.attr("lay-action"),N=K.attr("lay-text")||"搜索";L=L+this.value;N=N+' <span style="color: #FF5722;">'+o.escape(this.value)+"</span>";location.hash=o.correctRouter(L);q.serach.keys||(q.serach.keys={});q.serach.keys[o.tabsPage.index]=this.value;if(this.value===q.serach.keys[o.tabsPage.index]){q.refresh(K)}this.value=""}})},message:function(K){K.find(".layui-badge-dot").remove()},theme:function(){o.popupRight({id:"LAY_adminPopupTheme",success:function(){c(this.id).render("system/theme")}})},note:function(M){var K=o.screen()<2,L=layui.data(C.tableName).note;q.note.index=o.popup({title:"便签",shade:0,offset:["41px",(K?null:(M.offset().left-250)+"px")],anim:-1,id:"LAY_adminNote",skin:"layadmin-note layui-anim layui-anim-upbit",content:'<textarea placeholder="内容"></textarea>',resize:false,success:function(O,P){var N=O.find("textarea"),Q=L===undefined?"便签中的内容会存储在本地，这样即便你关掉了浏览器，在下次打开时，依然会读取到上一次的记录。是个非常小巧实用的本地备忘录":L;N.val(Q).focus().on("keyup",function(){layui.data(C.tableName,{key:"note",value:this.value})})}})},fullscreen:function(O,N){var R="layui-icon-screen-full";var K="layui-icon-screen-restore";var L=O.children("i");var Q=L.hasClass(R);var P=function(S){if(S){L.addClass(K).removeClass(R)}else{L.addClass(R).removeClass(K)}};var M=function(S){S?o.fullScreen():o.exitScreen()};if(N){return P(N.status)}P(Q);M(Q)},about:function(){o.popupRight({id:"LAY_adminPopupAbout",success:function(){c(this.id).render("system/about")}})},more:function(){o.popupRight({id:"LAY_adminPopupMore",success:function(){c(this.id).render("system/more")}})},back:function(){history.back()},setTheme:function(M){var L=M.data("index");var K=M.siblings(".layui-this").data("index");if(M.hasClass(n)){return}M.addClass(n).siblings(".layui-this").removeClass(n);o.initTheme(L);c("LAY_adminPopupTheme").render("system/theme")},rollPage:function(O,L){var N=x("#LAY_app_tabsheader"),R=N.children("li"),K=N.prop("scrollWidth"),Q=N.outerWidth(),M=parseFloat(N.css("left"));if(O==="left"){if(!M&&M<=0){return}var P=-M-Q;R.each(function(T,U){var S=x(U),V=S.position().left;if(V>=P){N.css("left",-V);return false}})}else{if(O==="auto"){(function(){var T=R.eq(L),U;if(!T[0]){return}U=T.position().left;if(U<-M){return N.css("left",-U)}if(U+T.outerWidth()>=Q-M){var S=U+T.outerWidth()-(Q-M);R.each(function(W,X){var V=x(X),Y=V.position().left;if(Y+M>0){if(Y-M>S){N.css("left",-Y);return false}}})}}())}else{R.each(function(T,U){var S=x(U),V=S.position().left;if(V+S.outerWidth()>=Q-M){N.css("left",-V);return false}})}}},leftPage:function(){q.rollPage("left")},rightPage:function(){q.rollPage()},closeThisTabs:function(){o.closeThisTabs()},closeOtherTabs:function(L){var K="LAY-system-pagetabs-remove";var M=o.tabsPage.index;if(L==="all"){x(B+":gt(0)").remove();x(k).find("."+A+":gt(0)").remove()}else{if(L==="right"){x(B+":gt("+M+")").remove();x(k).find("."+A+":gt("+M+")").remove()}else{x(B).each(function(N,O){if(N&&N!=M){x(O).addClass(K);o.tabsBody(N).addClass(K)}});x("."+K).remove()}}},closeRightTabs:function(){q.closeOtherTabs("right")},closeAllTabs:function(){q.closeOtherTabs("all");location.hash=""},shade:function(){o.sideFlexible()}};(function(){w.addClass("layui-layout-body");if(o.screen()<1){delete C.pageTabs}if(!C.pageTabs){y.addClass("layadmin-tabspage-none")}if(H.ie&&H.ie<10){c.error("IE"+H.ie+"下访问可能不佳，推荐使用：Chrome / Firefox / Edge 等高级浏览器",{offset:"auto",id:"LAY_errorIE"})}})();(function(){var K=layui.data(C.tableName);if(K.theme){o.theme(K.theme)}else{if(C.theme){o.initTheme(C.theme.initColorIndex)}}})();o.on("hash(side)",o.setSideMenuStatus);h.on("nav(layadmin-system-side-menu)",function(K){if(K.siblings(".layui-nav-child")[0]&&y.hasClass(e)){o.sideFlexible("spread");layer.close(K.data("index"))}o.tabsPage.type="nav"});h.on("nav(layadmin-pagetabs-nav)",function(L){var K=L.parent();K.removeClass(n);K.parent().removeClass(b)});var i=function(N){var M=N.attr("lay-id");var K=N.attr("lay-attr");var L=N.index();location.hash=M===C.entry?"/":(K||"/");o.tabsBodyChange(L)},B="#LAY_app_tabsheader>li";w.on("click",B,function(){var L=x(this),K=L.index();o.tabsPage.type="tab";o.tabsPage.index=K;if(L.attr("lay-attr")==="iframe"){return o.tabsBodyChange(K)}i(L);o.runResize();o.resizeTable()});h.on("tabDelete(layadmin-layout-tabs)",function(L){var K=x(B+".layui-this");L.index&&o.tabsBody(L.index).remove();i(K);o.delResize()});w.on("click","*[lay-href]",function(){var M=x(this);var K=M.attr("lay-href");var L=layui.hash();o.tabsPage.elem=M;location.hash=o.correctRouter(K);if(C.refreshCurrPage){if(o.correctRouter(K)===L.href){o.events.refresh()}}});w.on("click","*[layadmin-event]",function(){var L=x(this),K=L.attr("layadmin-event");q[K]&&q[K].call(this,L)});w.on("mouseenter","*[lay-tips]",function(){var M=x(this);if(M.parent().hasClass("layui-nav-item")&&!y.hasClass(e)){return}var K=M.attr("lay-tips"),O=M.attr("lay-offset"),N=M.attr("lay-direction"),L=layer.tips(K,this,{tips:N||1,time:-1,success:function(P,Q){if(O){P.css("margin-left",O+"px")}}});M.data("index",L)}).on("mouseleave","*[lay-tips]",function(){layer.close(x(this).data("index"))});var j=layui.data.resizeSystem=function(){layer.closeAll("tips");if(!j.lock){setTimeout(function(){o.sideFlexible(o.screen()<2?"":"spread");delete j.lock},100)}j.lock=true};u.on("resize",layui.data.resizeSystem);I.on("fullscreenchange",function(){q.fullscreen(x('[layadmin-event="fullscreen"]'),{status:document.fullscreenElement})});o.setComponentsToken=(function t(M){var L=C.request;M=x.extend({},M);if(L.tokenName){var K=function(N){var P={};var O={};O[L.tokenName]=layui.data(C.tableName)[L.tokenName]||M.value||"";if(L.tokenTransferMethod==="headers"){P.headers=O}else{P[N||"data"]=O}return P};l.set(K("where"));r.set(K())}return t})();F("admin",o)});