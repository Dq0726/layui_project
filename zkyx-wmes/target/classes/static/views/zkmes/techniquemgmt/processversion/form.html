<div class="layui-form" lay-filter="zkmes-techniquemgmt-process-form" style="padding: 20px 30px 0 0">
  <div class="layui-form-item">
      <label class="layui-form-label">工序编号<span class="required">*</span></label>
      <div class="layui-input-block">
      <script type="text/html" template> 
        <input 
         type="text" 
         name="processId" 
         placeholder="请输入" 
         value="{{ d.params.processId || '' }}" 
         autocomplete="off" 
         class="layui-input" 
				 {{# if(d.params.processId != null && d.params.processId != ''){ }} 
					{{= "disabled" }}
				 {{# } }} 
         lay-verify="required"/> 
      </script>
      </div>

  </div>
  <div class="layui-form-item">
     <div class="layui-inline">
     <label class="layui-form-label">工序名称<span class="required">*</span></label>
     <div class="layui-input-block">
      <script type="text/html" template>
        <input type="text" name="processName" placeholder="请输入" value="{{ d.params.processName || '' }}" lay-verify="required"  lay-verify="required" autocomplete="off" class="layui-input" />
      </script>
     </div>
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">状态</label>
    <div class="layui-input-block"> 
      <input type="radio" name="status" value="0" lay-filter="zkmes-techniquemgmt-process-status-radio-filter" title="正常" checked />
      <input type="radio" name="status" value="1" lay-filter="zkmes-techniquemgmt-process-status-radio-filter" title="停用"  /> 
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">备注</label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <textarea rows="2" type="text" name="remark" autocomplete="off" class="layui-textarea">{{ d.params.remark || '' }}</textarea>
      </script>
    </div>
  </div>
 
  <script type="text/html" template>
  {{# if(d.params.processId != null && d.params.processId != ''){ }} 
  <div class="layui-form-item">
    <fieldset class="layui-elem-field layui-field-title">
      <legend>工序版本列表</legend>
    </fieldset>
    <table
      id="zkmes-techniquemgmt-process-form-table"
      lay-filter="zkmes-techniquemgmt-process-form-table"
    ></table> 
  </div>
  {{# } }}
  </script>
   
  <script type="text/html" id="zkmes-techniquemgmt-process-form-toolbar-head">
  <div class="layui-btn-container">
    <button class="layui-btn layui-btn-sm" lay-event="add">新增</button>
    <button class="layui-btn layui-btn-sm" lay-event="refresh">刷新</button>
  </div>
  </script>
  <script type="text/html" id="zkmes-techniquemgmt-process-form-toolbar-row">
  <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="edit">
    <i class="layui-icon layui-icon-edit"></i>编辑</a>
  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">
    <i class="layui-icon layui-icon-delete"></i>删除</a>
  </script>
 

  <div class="layui-form-item">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input type="button" id="zkmes-techniquemgmt-process-form-submit" lay-submit lay-filter="zkmes-techniquemgmt-process-form-submit" value="确认" class="layui-btn" />
    </div>
  </div>
</div>

<script type="text/html" template lay-done="techniquemgmtProcessParamsDone(d.params)"></script>


<script>

techniquemgmtProcessParamsDone = function (params) {
	layui.use(["admin", "form", "common", "util"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      form = layui.form,
      table = layui.table, 
      common = layui.common, 
      util = layui.util;
 
    	 
    	 if(params.processId == null || params.processId == '')
       		return 
        
       // 调用 common.js模块getPopupSize 函数，用ES6解构赋值获取返回的四个参数
       const { popupWidthHeight, popupOffsetWidthHeight } = common.getPopupSize();
        
       var prefix = "zkmes/techniquemgmt/process/version";

       table.render({
         elem: "#zkmes-techniquemgmt-process-form-table",
         url: prefix + "/list",
         where: {
        	 processId: params.processId,
         },
         toolbar: "#zkmes-techniquemgmt-process-form-toolbar-head",
         defaultToolbar: [
           "filter",
           "print",
           "exports",
           {
             title: "提示",
             layEvent: "LAYTABLE_TIPS",
             icon: "layui-icon-tips",
           },
         ],
         height: "full-450",
         cols: [
           [
             { type: "numbers", title: "序号" },
             { field: "versionId", title: "版本ID" },
             { field: "version", title: "版本号" },
             { field: "techniqueName", title: "工艺名称" },  
             { field: "createTime", title: "创建时间" },
             {
               title: "操作",
               width: 160,
               align: "center",
               fixed: "right",
               toolbar: "#zkmes-techniquemgmt-process-form-toolbar-row",
             },
           ],
         ],
       });

        
    	if(params.status != null){
    		 $("input[name=status][value=0]").attr("checked", params.status == 0 ? true : false);
         $("input[name=status][value=1]").attr("checked", params.status == 1 ? true : false);
    	}
    	 
    });
  };
  
  
  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      form = layui.form;
  });
</script>
