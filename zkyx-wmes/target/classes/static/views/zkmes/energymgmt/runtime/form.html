<div class="layui-form" lay-filter="zkmes-energymgmt-runtime-form" style="padding: 10px 30px 0 0"> 
  <div class="layui-form-item">
    <!-- 网关编码 runtimeId-->
    <div class="layui-inline">
      <label class="layui-form-label">设备编码</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text" 
            name="equipmentarchivesId"
            value="{{ d.params.equipmentarchivesId || '' }}"
            placeholder="请输入"
            autocomplete="off"
            lay-verify="required"
            class="layui-input"
          />
        </script>
      </div>
    </div>
    <!-- 网关名称 equipmentName-->
    <div class="layui-inline">
      <label class="layui-form-label">设备名称</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentarchivesName"
            value="{{ d.params.equipmentarchivesName || '' }}"
            placeholder="请输入"
            autocomplete="off"
            lay-verify="required"
            class="layui-input"
          />
        </script>
      </div>
    </div>
    <!-- 网关类型 equipmenttype-->
    <div class="layui-inline">
      <label class="layui-form-label">安装车间</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workshopName"
            value="{{ d.params.workshopName || '' }}"
            placeholder="请输入"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>
  <div class="layui-form-item">
    <!-- 型号 modelId-->
    <div class="layui-inline">
      <label class="layui-form-label">安装工作站</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workstationName"
            value="{{ d.params.workstationName || '' }}"
            placeholder="请输入"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
 
  <!-- 型号 modelId-->
    <div class="layui-inline">
      <label class="layui-form-label">通讯编码</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
						id="commcode"
            name="commcode"
            value="{{ d.params.commcode || '' }}"
            placeholder="请输入"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

     
  </div>

  <div class="layui-form-item">
    <div class="layui-tab layui-tab-brief">
      <ul class="layui-tab-title">
        <li class="layui-this">电能数据</li>
        <li >电能分析</li>
      </ul>
      <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
          <table id="zkmes-energymgmt-runtime-form-table" lay-filter="zkmes-energymgmt-runtime-form-table"></table>  
        </div>
      </div>
    </div>
  </div> 
</div>

<script type="text/html" template lay-done="layui.data.sendZkmesEnergymgmtRuntimeFormParams(d.params)"></script>

<script>
  layui.data.sendZkmesEnergymgmtRuntimeFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form,
        laydate = layui.laydate,
        util = layui.util,
        xmSelect = layui.xmSelect;

      var prefix = "/zkmes/bdata/eem";
 
      table.render({
        elem: "#zkmes-energymgmt-runtime-form-table",
        url: prefix + "/list",
        where: {  
        	commcode: params.commcode
        },
        page: true, 
        height: "full-450",
        cols: [
          [
          	 { field: "ua", title: "a相电压(V)" }, 
             { field: "ub", title: "b相电压(V)" }, 
             { field: "uc", title: "c相电压(V)" }, 
             { field: "ia", title: "a相电流(A)" }, 
             { field: "ib", title: "b相电流(A)" }, 
             { field: "ic", title: "c相电流(A)" }, 
             { field: "pt", title: "有功功率(w)" }, 
             { field: "ep", title: "总电能(KWH)" },  
             { field: "acqTime", width: 200, title: "采集时间" },  
          ],
        ],
      });
      form.render(null);
    });
  };

  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      table = layui.table,
      laydate = layui.laydate,
      form = layui.form;
  });
</script>
