<div class="layui-form" lay-filter="zkmes-purchasemgmt-purchasein-form" style="padding: 10px 30px 0 0">
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">入库单号</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            id="inboundorderId"
            name="inboundorderId"
            placeholder="请输入"
            value="{{ d.params.inboundorderId || '' }}"
            lay-verify="required"
            autocomplete="off"
            class="layui-input"
			disabled
          />
        </script>
      </div>



    </div>

    <div class="layui-inline">
      <label class="layui-form-label">审核时间</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text" 
            name="reviewTime"
            placeholder="入库单审批后自动生成"
            value="{{ d.params.reviewTime || '' }}" 
            autocomplete="off"
            class="layui-input"
			disabled
          />
        </script>
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">供应商</label>
      <div class="layui-input-inline">

        <script type="text/html" template>
          <input
           type="text"
            disabled
			placeholder="自动生成"
            value="{{ d.params.supplierName || '' }}"
            name="supplierName"
            lay-options="{split: true}"
            class="layui-input"
          />
        </script>
      </div>
    </div>

  </div>


  <div class="layui-form-item">
    <label class="layui-form-label">备注</label>
    <div class="layui-input-block">
      <script type="text/html" template>
          <input
            type="text"
            name="remark"
          	placeholder="请输入"
            autocomplete="off"
            class="layui-input"
            value="{{ d.params.remark || '' }}"
          />
        </script>
    </div>
  </div>
  <div class="layui-form-item layui-hide">
    <div class="layui-inline">
      <label class="layui-form-label">供应商<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchSupplier"
            readonly
            placeholder="请选择"
            value="{{ d.params.supplierId || '' }}"
            name="supplierId"
            lay-options="{split: true}"
            class="layui-input"
          />
          </script>
      </div>
    </div>
  </div>
  <div class="layui-form-item">
    <table id="zkmes-purchasemgmt-purchasein-form-table" lay-filter="zkmes-purchasemgmt-purchasein-form-table"></table>
    <script type="text/html" id="zkmes-purchasemgmt-purchasein-form-toolbar-head">
      <div class="layui-btn-container"> 
        <button class="layui-btn layui-btn-sm" lay-event="refresh">刷新</button>
      </div>
    </script>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input type="button" id="zkmes-purchasemgmt-purchasein-form-submit" lay-submit
        lay-filter="zkmes-purchasemgmt-purchasein-form-submit" value="确认" class="layui-btn" />
    </div>
  </div>
</div>

<script type="text/html" template lay-done="zkmesInvmgmtPurchaseinFormParamsDone(d.params)"></script>

<script>
  zkmesInvmgmtPurchaseinFormParamsDone = function (params) {
    layui.use(["admin", "form"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form,
        laydate = layui.laydate,
        util = layui.util;


      var prefix = "zkmes/purchasemgmt/purchasein/product";

      table.render({
        elem: "#zkmes-purchasemgmt-purchasein-form-table",
        url: prefix + "/list1",
        toolbar: "#zkmes-purchasemgmt-purchasein-form-toolbar-head", 
        where: {
          inboundorderId: params.inboundorderId,
        },
        defaultToolbar: [
          "filter",
          "print",
          "exports",
          {
            title: "提示",
            layEvent: "LAYTABLE_TIPS",
            icon: "layui-icon-tips",
          },
        ],
        height: "full-400",
        cols: [
          [
            { field: "productId", title: "物料编号", totalRow: "合计：" },
            { field: "productName", title: "名称" },
            { field: "modelName", title: "型号" },
            { field: "specName", title: "规格" },
            { field: "uomName", title: "单位" },
            { field: "inboundQty", title: "数量" }, 
            { field: "createTime", title: "创建时间" }
          ],
        ],
        parseData: function (res) { // res 即为原始返回的数据  
            return {
              "code": res.code, // 解析接口状态
              "msg": res.message, // 解析提示文本
              "count": res.data.length, // 解析数据长度
              "data": res.data, // 解析数据列表
              "totalRow": res.totalRow // 解析数据列表
            };
          },
      });


      //工具条
      table.on("tool(zkmes-purchasemgmt-purchasein-form-table)", function (obj) {
        var data = obj.data;
        if (obj.event === "del") {
          layer.confirm("确定删除？", function (index) {
            admin.req({
              url: prefix + "/" + data.purchaseinproductId,
              type: "delete",
              contentType: "application/json;charset=UTF-8",
              done: function (res) {
                layer.msg("删除成功");
                layui.table.reload("zkmes-purchasemgmt-purchasein-form-table"); //重载表格
                layer.close(index); //执行关闭
              },
            });
          });
        }
      });

      // 头部工具栏点击事件
      table.on("toolbar(zkmes-purchasemgmt-purchasein-form-table)", function (obj) {
        switch (obj.event) {
          case "delete":
            layer.msg("删除");
            break;
          case "update":
            layer.msg("编辑");
            break;
          case "LAYTABLE_TIPS":
            layer.msg("提示");
            break;
          case "refresh":
            layui.table.reloadData("zkmes-purchasemgmt-purchasein-form-table"); //重载表格
            break;
        }
      });

      form.render(null);
    });
  };

  layui.use(["admin", "form", "common"], function () {
    var $ = layui.$,
      util = layui.util,
      admin = layui.admin,
      common = layui.common,
      view = layui.view,
      table = layui.table,
      form = layui.form;


  });
</script>