<div class="layui-form" lay-filter="zkmes-invmgmt-outboundorder-out-inbatch-form" style="padding: 10px 30px 0 0">
  <div class="layui-form-item layui-hide">
    <div class="layui-inline">
      <label class="layui-form-label">库存批次号</label>
      <div class="layui-input-inline"> 
          <input
            type="text"
            id="inbatchId"
            name="inbatchId"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input" 
          /> 
      </div>
    </div>
    
  <div class="layui-inline">
      <label class="layui-form-label">产品编号</label>
      <div class="layui-input-inline"> 
          <input
            type="text"
            id="productId"
            name="productId"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input" 
          /> 
      </div>
    </div>
      <!--  
     <div class="layui-inline">
      <label class="layui-form-label">仓库编号</label>
      <div class="layui-input-inline"> 
          <input
            type="text"
            id="warehouseId"
            name="warehouseId"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input" 
          /> 
      </div>
    </div> -->
 
  </div>

  <div class="layui-form-item">
    <table id="zkmes-invmgmt-outboundorder-out-inbatch-form-table" lay-filter="zkmes-invmgmt-outboundorder-out-inbatch-form-table"></table>
    <script type="text/html" id="zkmes-invmgmt-outboundorder-out-inbatch-form-toolbar-head">
      <div class="layui-btn-container"> 
        <button class="layui-btn layui-btn-sm" lay-event="refresh">刷新</button>
      </div>
    </script>  
  </div>

  <div class="layui-form-item layui-hide">
    <label class="layui-form-label"></label>
    <div class="layui-input-block"> 
       <input
        type="button"
        id="zkmes-invmgmt-outboundorder-out-inbatch-form-submit"
        lay-submit
        lay-filter="zkmes-invmgmt-outboundorder-out-inbatch-form-submit"
        value="关闭"
        class="layui-btn "
      />
    </div>
  </div>
</div>

<script type="text/html" template lay-done="layui.data.sendZkmesInvmgmtOutboundorderOutFormParams(d.params)"></script>

<script>
  layui.data.sendZkmesInvmgmtOutboundorderOutFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form,
        xmSelect = layui.xmSelect;
 
      var prefix = "zkmes/invmgmt/inbatch";

      table.render({
        elem: "#zkmes-invmgmt-outboundorder-out-inbatch-form-table",
        url: prefix + "/list1", 
        where: {
        	productId: params.productId,
        },
        toolbar: "#zkmes-invmgmt-outboundorder-out-inbatch-form-toolbar-head",
        defaultToolbar: [
          "filter",
          "print",
          "exports",
          {
            title: "提示",
            layEvent: "LAYTABLE_TIPS",
            icon: "layui-icon-tips",
          },
        ],
        height: "full-300",
        cols: [
          [
            { field: "inbatchId", title: "批次号" },
            { field: "productId", title: "物料编号" },
            { field: "productName", title: "物料名称" },
            { field: "warehouseName", title: "仓库名称" }, 
            { field: "supplierName", title: "供应商名称" }, 
            { field: "inboundQty", title: "入库数量"   }, 
            { field: "outboundQty", title: "出库数量"   } , 
            {
              field: "remainingQty",
              title: "剩余数量",
              templet: function (res) {
            	var html = "-";  
                html = '<span class="layui-badge layui-bg-blue">' + res.remainingQty + '</span>'; 
                return html;
              }, 
              
            }
          ]
        ]
      });
 
      table.on('rowDouble(zkmes-invmgmt-outboundorder-out-inbatch-form-table)', function(obj){
   
     	   
     	  var submit  = $("#zkmes-invmgmt-outboundorder-out-inbatch-form-submit")  
     	  var data = form.val('zkmes-invmgmt-outboundorder-out-inbatch-form', JSON.parse(JSON.stringify(obj.data)));
     	   
     	  form.render();
     	  
     	  // alert(JSON.stringify(data));
     	  
     	   submit.trigger('click');
     });
     
      // 头部工具栏点击事件
      table.on("toolbar(zkmes-invmgmt-outboundorder-out-inbatch-form-table)", function (obj) {
        switch (obj.event) { 
          case "delete":
            layer.msg("删除");
            break;
          case "update":
            layer.msg("编辑");
            break;
          case "LAYTABLE_TIPS":
            layer.msg("提示");
            break;
          case "refresh":
            layui.table.reloadData("zkmes-invmgmt-outboundorder-out-inbatch-form-table"); //重载表格
            break;
        }
      });
        
      form.render(null);
    });
  };

  layui.use(["admin", "form", "common"], function () {
    var $ = layui.$,
      util = layui.util,
      admin = layui.admin,
      common = layui.common,
      view = layui.view,
      table = layui.table,
      form = layui.form;

  
  });
</script>
