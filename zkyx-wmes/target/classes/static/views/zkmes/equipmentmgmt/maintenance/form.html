 <div class="layui-form" lay-filter="zkmes-equipmentmgmt-maintenance-form" style="padding: 10px 30px 0 0">
  <div class="layui-form-item">
    <div class="layui-inline layui-hide">
      <label class="layui-form-label">设备编码</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="maintenanceId"
            value="{{ d.params.maintenanceId || '' }}"
            placeholder="请输入"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备id equipmentarchives_id-->
    <div class="layui-inline layui-hide">
      <label class="layui-form-label">设备ID</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentarchivesId"
            value="{{ d.params.equipmentarchivesId || '' }}"
            placeholder="请输入"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备名称 equipmentName-->
    <div class="layui-inline">
      <label class="layui-form-label">设备名称<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchEquipment"
            readonly
            placeholder="请选择"
            value="{{ d.params.equipmentarchivesName || '' }}"
            name="equipmentarchivesName"
            lay-options="{split: true}"
            class="layui-input"
            lay-verify="required"
          />
        </script>
      </div>
    </div>

    <!-- 设备序列号 equipment_sn-->
    <div class="layui-inline">
      <label class="layui-form-label">设备序列号</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentSn"
            value="{{ d.params.equipmentSn || '' }}"
            disabled
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 车间 workshop-->
    <div class="layui-inline">
      <label class="layui-form-label">车间</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workshopName"
            disabled
            value="{{ d.params.workshopName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
    <!-- 工作站 workstation-->
    <div class="layui-inline">
      <label class="layui-form-label">工作站</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workstationName"
            disabled
            value="{{ d.params.workstationName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>
  <div class="layui-form-item">
    <!-- 型号 model-->
    <div class="layui-inline">
      <label class="layui-form-label">型号</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="model"
            disabled
            value="{{ d.params.model || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 规格 spec-->
    <div class="layui-inline">
      <label class="layui-form-label">规格</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="spec"
            disabled
            value="{{ d.params.spec || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备状态 equipmentStatus-->
    <div class="layui-inline">
      <label class="layui-form-label">设备状态</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentstatusName"
            disabled
            value="{{ d.params.equipmentstatusName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>

  <div class="layui-form-item">
    <div class="layui-tab layui-tab-brief">
      <ul class="layui-tab-title">
        <li class="layui-this">维修信息</li>
      </ul>
      <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
          <div class="layui-form-item">
            <label class="layui-form-label">故障原因</label>
            <div class="layui-input-block">
              <script type="text/html" template>
                <textarea type="text" name="faultcause" autocomplete="off" class="layui-textarea">{{ d.params.faultcause || '' }}</textarea>
              </script>
            </div>
          </div>

          <div class="layui-form-item">
            <label class="layui-form-label">维修过程</label>
            <div class="layui-input-block">
              <script type="text/html" template>
                <textarea type="text" name="repairprocess" autocomplete="off" class="layui-textarea">{{ d.params.repairprocess || '' }}</textarea>
              </script>
            </div>
          </div>

          <div class="layui-form-item">
            <!-- 报修人 repairer-->
            <div class="layui-inline">
              <label class="layui-form-label">报修人</label>
              <div class="layui-input-inline">
                 <script type="text/html" template>
                  <input
                    type="text" 
                    name="repairer"
                    placeholder="请输入"
                    value="{{ d.params.repairer || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script>
              </div>
            </div>
            <!-- 报修日期 repairDate-->
            <div class="layui-inline">
              <label class="layui-form-label">报修日期</label>
              <div class="layui-input-inline">
                <input
                  type="text"
                  id="ID-laydate-repairdate"
                  placeholder="请输入"
                  name="repairdate"
                  autocomplete="off"
                  class="layui-input"
                />
              </div>
            </div> 
          </div>
          
          <div class="layui-form-item">
            <!-- 维修人 repairer-->
            <div class="layui-inline">
              <label class="layui-form-label">维修人</label>
              <div class="layui-input-inline">
                 <script type="text/html" template>
                  <input
                    type="text" 
                    name="repairman"
                    placeholder="请输入"
                    value="{{ d.params.repairman || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script>
              </div>
            </div>
            <!-- 维修日期 repairDate-->
            <div class="layui-inline">
              <label class="layui-form-label">维修日期</label>
              <div class="layui-input-inline">
                <input
                  type="text"
                  id="ID-laydate-maintenancedate"
                  placeholder="请输入"
                  name="maintenancedate"
                  autocomplete="off"
                  class="layui-input"
                />
              </div>
            </div> 
          </div>
          
          <div class="layui-form-item"> 
            <!-- 维修结果 repairResults-->
            <div class="layui-inline">
              <label class="layui-form-label">维修结果</label>
              <div class="layui-input-inline">
                <script type="text/html" template>
                  <input
                    type="text" 
                    name="repairresult"
                    placeholder="请输入"
                    value="{{ d.params.repairresult || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script> 
                
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="layui-form-item">
      <label class="layui-form-label"></label>
      <div class="layui-input-inline">
        <input
          type="button"
          id="zkmes-equipmentmgmt-maintenance-form-submit"
          lay-submit
          lay-filter="zkmes-equipmentmgmt-maintenance-form-submit"
          value="确认"
          class="layui-btn"
        />
      </div>
    </div>
  </div>
</div>
 
 
 

<script type="text/html" template lay-done="layui.data.sendZkmesInvmgmtmaintenanceEditFormParams(d.params)"></script>

<script>
  layui.data.sendZkmesInvmgmtmaintenanceEditFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form,
        laydate = layui.laydate,
        util = layui.util,
        xmSelect = layui.xmSelect;
 
      
    
      /* 报修日期 */
	    laydate.render({
	      elem: "#ID-laydate-repairdate",
	      type: "datetime",
	      value: params.repairdate,
	      isInitValue: true,
	      fullPanel: true,
	    });
      
	    /* 维修日期 */
	    laydate.render({
	      elem: "#ID-laydate-maintenancedate",
	      type: "datetime",
	      value: params.maintenancedate,
		  isInitValue: true,
	      fullPanel: true,
	    });
      
	    //////////////////////////////////////////////
	      form.on("input-affix(searchEquipment)", function (data) {
	        admin.popup({
	          title: "选择车间",
	          area: "1500px",
	          offset: "100px",
	          id: "popup-zkmes-equipmentmgmt-maintenance-equipmentarchives",
	          success: function (layero, index) {
	            view(this.id)
	              .render("zkmes/equipmentmgmt/maintenance/equipmentarchives-form")
	              .done(function () {
	                form.render(
	                  null,
	                  "zkmes-equipmentmgmt-maintenance-equipmentarchives-form"
	                );
	                //提交
	                form.on(
	                  "submit(zkmes-equipmentmgmt-maintenance-equipmentarchives-form-submit)",
	                  function (data) {
	                    var field = data.field; //获取提交的字段 
	                    
	                    //提交 Ajax 成功后，关闭当前弹层并重载表格
	                    form.val(
	                      "zkmes-equipmentmgmt-maintenance-form",
	                      field
	                    );
	                    layer.close(index); //执行关闭
	                  }
	                );
	              });
	          },
	        });
	      });
      form.render(null);
    });
  };
 

  layui.use(["admin", "form"], function () {
	    var $ = layui.$,
	      admin = layui.admin,
	      view = layui.view,
	      table = layui.table,
	      laydate = layui.laydate,
	      form = layui.form;
	    
	    
	    
	  });
  
</script>
