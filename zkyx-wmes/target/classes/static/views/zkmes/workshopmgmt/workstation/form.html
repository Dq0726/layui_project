<div class="layui-form" lay-filter="zkmes-workshopmgmt-workstation-form" style="padding: 10px 30px 0 0">
    <div class="layui-form-item">
        <label class="layui-form-label">工作站编号<span class="required">*</span></label>
        <div class="layui-input-block">
            <script type="text/html" template>
        <input
          type="text"
          name="workstationId"
          placeholder="请输入"
          value="{{ d.params.workstationId || '' }}"
          lay-verify="required"
          autocomplete="off"
          class="layui-input"
          {{# if( d.params.workstationId != null && d.params.workstationId != ''){ }}
		  {{="disabled"}}
          {{# } }}
        />
      </script>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">工作站名称<span class="required">*</span></label>
        <div class="layui-input-block">
            <script type="text/html" template>
        <input
          type="text"
          name="workstationName"
          placeholder="请输入"
          value="{{ d.params.workstationName || '' }}"
          lay-verify="required"
          autocomplete="off"
          class="layui-input"
        />
      </script>
        </div>
    </div>


    <div class="layui-form-item">
        <label class="layui-form-label">所属车间<span class="required">*</span></label>
        <div class="layui-input-block">
        <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchWorkshop" 
            disabled
            placeholder="请选择"
            value="{{ d.params.workshopName || '' }}" 
 			name="workshopName" 
            lay-options="{split: true}"
            class="layui-input"
          />
          <input
            type="text" 
            readonly
            placeholder="请选择"
            value="{{ d.params.workshopId || '' }}"
            name="workshopId" 
            class="layui-input layui-hide"
          />
        </script>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">所属工序</label>
        <div class="layui-input-block">
        <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchProcess" 
            disabled
            placeholder="请选择"
            value="{{ d.params.processName || '' }}"
            name="processName"
            lay-options="{split: true}"
            class="layui-input"
          />
          <input
            type="text" 
            readonly
            value="{{ d.params.processId || '' }}"
            name="processId" 
            class="layui-input layui-hide"
          />

        </script>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">是否启用</label>
        <div class="layui-input-block">
            <input type="radio" name="status" value="0"
                lay-filter="zkmes-workshopmgmt-workstation-add-form-status-radio-filter" title="正常" checked />
            <input type="radio" name="status" value="1"
                lay-filter="zkmes-workshopmgmt-workstation-add-form-status-radio-filter" title="停用" />
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">备注</label>
        <div class="layui-input-block">
            <script type="text/html" template>
        		<textarea type="text" name="remark" placeholder="请输入" autocomplete="off" class="layui-textarea">{{ d.params.remark || '' }}</textarea>
      		</script>
        </div>
    </div>

  <div class="layui-form-item">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input
        type="button"
        id="zkmes-workshopmgmt-workstation-form-submit"
        lay-submit
        lay-filter="zkmes-workshopmgmt-workstation-form-submit"
        value="确认"
        class="layui-btn"
      />
    </div>
  </div>
</div>

<script
  type="text/html"
  template
  lay-done="layui.data.sendZkmesWorkshopmgmtWorkstationEditFormParams(d.params)"
></script>

<script>
  layui.data.sendZkmesWorkshopmgmtWorkstationEditFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        form = layui.form,
        xmSelect = layui.xmSelect;

      //////////////////////////////////////////////
      form.on("input-affix(searchWorkshop)", function (data) {
        admin.popup({
          title: "选择车间",
          area: "1500px",
          offset: "100px",
          id: "popup-zkmes-workshopmgmt-workstation-workshop",
          success: function (layero, index) {
            view(this.id)
              .render("zkmes/workshopmgmt/workstation/workshop-form")
              .done(function () {
                form.render(
                  null,
                  "zkmes-workshopmgmt-workstation-workshop-form"
                );
                //提交
                form.on(
                  "submit(zkmes-workshopmgmt-workstation-workshop-form-submit)",
                  function (data) {
                    var field = data.field; //获取提交的字段 
                    
                    //提交 Ajax 成功后，关闭当前弹层并重载表格
                    form.val(
                      "zkmes-workshopmgmt-workstation-form",
                      field
                    );
                    layer.close(index); //执行关闭
                  }
                );
              });
          },
        });
      });

      form.on("input-affix(searchProcess)", function (data) {
          admin.popup({
            title: "选择工序",
            area: "1500px",
            offset: "100px",
            id: "popup-zkmes-workshopmgmt-workstation-process",
            success: function (layero, index) {
              view(this.id)
                .render("zkmes/workshopmgmt/workstation/process-form")
                .done(function () {
                  form.render(
                    null,
                    "zkmes-workshopmgmt-workstation-process-form"
                  );
                  //提交
                  form.on(
                    "submit(zkmes-workshopmgmt-workstation-process-form-submit)",
                    function (data) {
                      var field = data.field; //获取提交的字段
                      //提交 Ajax 成功后，关闭当前弹层并重载表格
                      form.val(
                        "zkmes-workshopmgmt-workstation-form",
                        field
                      );
                      layer.close(index); //执行关闭
                    }
                  );
                });
            },
          });
        });

      if (params.status != null) {
        $("input[name=status][value=0]").attr("checked", params.status == 0 ? true : false);
        $("input[name=status][value=1]").attr("checked", params.status == 1 ? true : false);
      }
    });
  };

  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      table = layui.table,
      form = layui.form;

  });
</script>
