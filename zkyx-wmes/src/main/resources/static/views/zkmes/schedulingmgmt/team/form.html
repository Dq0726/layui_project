<div class="layui-form" lay-filter="zkmes-schedulingmgmt-team-form" style="padding: 20px 30px 0 0">
  <div class="layui-form-item">
    <label class="layui-form-label">班组编号</label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <input
          type="text"
          name="teamId"
          placeholder="请输入"
          {{# if( d.params.teamId != null && d.params.teamId != ''){ }}
		  {{="disabled"}}
          {{# } }}
          value="{{ d.params.teamId || '' }}"
          autocomplete="off"
          class="layui-input"
        />
      </script>
    </div>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label">班组名称<span class="required">*</span></label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <input
          type="text"
          name="teamName"
          placeholder="请输入"
          value="{{ d.params.teamName || '' }}"
          lay-verify="required"
          autocomplete="off"
          class="layui-input"
        />
      </script>
    </div>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label">班组类型<span class="required">*</span></label>
    <div class="layui-input-block">
      <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchTeamtype"
            lay-verify="required"
			disabled 
            placeholder="请选择"
            value="{{ d.params.teamtypeName || '' }}"
            name="teamtypeName"
            lay-options="{split: true}"
            class="layui-input"
          />
          <input
            type="text"
            readonly 
            value="{{ d.params.teamtypeId || '' }}"
            name="teamtypeId"
            class="layui-input layui-hide"
          />
      </script>
    </div>
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label">班组组长</label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <input
          type="text"
          name="monitorId"
          placeholder="请输入"
          value="{{ d.params.monitorId || '' }}"
          lay-verify="required"
          autocomplete="off"
          class="layui-input"
        />
      </script>
    </div>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label">是否启用</label>
    <div class="layui-input-block">
      <input type="radio" name="status" value="0" title="是" checked />
      <input type="radio" name="status" value="1" title="否" />
    </div>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label">备注</label>
    <div class="layui-input-block">
      <script type="text/html" template>
        <textarea type="text" name="remark" autocomplete="off" class="layui-textarea">
{{ d.params.remark || '' }}</textarea
        >
      </script>
    </div>
  </div>

  <div class="layui-form-item">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input
        type="button"
        id="zkmes-schedulingmgmt-team-form-submit"
        lay-submit
        lay-filter="zkmes-schedulingmgmt-team-form-submit"
        value="确认"
        class="layui-btn"
      />
    </div>
  </div>
</div>

<script type="text/html" template lay-done="layui.data.sendZkmesSchedulingmgmtTeamtypeFormParams(d.params)"></script>

<script>
  layui.data.sendZkmesSchedulingmgmtTeamtypeFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        form = layui.form,
        xmSelect = layui.xmSelect;

      //////////////////////////////////////////////
      var teamtypeIds = params.teamtypeId + "";
      if (teamtypeIds) {
    	  teamtypeIds = teamtypeIds.split(",");
      }
      form.on("input-affix(searchTeamtype)", function (data) {
          admin.popup({
              title: "选择班组类型",
              area: "1500px",
              offset: "110px",
              id: "popup-zkmes-schedulingmgmt-team-form-teamtype",
              success: function (layero, index) {
                  view(this.id)
                      .render("zkmes/schedulingmgmt/team/teamtype-form")
                      .done(function () {
                          form.render(null, "zkmes-schedulingmgmt-team-teamtype-form");
                          //提交
                          form.on(
                              "submit(zkmes-schedulingmgmt-team-teamtype-form-submit)",
                              function (data) {
                                  var field = data.field; //获取提交的字段
                                  form.val("zkmes-schedulingmgmt-team-form", field);
                                  $("#teamtypeId").val(field.teamtypeName);
                                  layer.msg("选择成功");
                                  layer.close(index); //执行关闭
                              }
                          );
                      });
              },
          });
      });
      admin.req({
        url: "/zkmes/schedulingmgmt/teamtype/list1",
        type: "get",
        contentType: "application/json;charset=UTF-8",
        done: function (res) {
          teamtypeXmselect = xmSelect.render({
            el: "#teamtypeXmselect",
            name: "teamtypeId",
            data: res.data,
            radio: true,
            initValue: teamtypeIds,
            prop: {
              name: "teamtypeName",
              value: "teamtypeId",
            },
          });
        },
      });

      if (params.status != null) {
        $("input[name=status][value=0]").attr("checked", params.status == 0 ? true : false);
        $("input[name=status][value=1]").attr("checked", params.status == 1 ? true : false);
      }
    });
  };

  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      form = layui.form;
  });
</script>
