<div class="layui-form" lay-filter="zkmes-schedulingmgmt-schedulingplan-form" style="padding: 10px 30px 0 0">
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">排班计划编号<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
       	  <input
          type="text"
          name="schedulingplanId"
          placeholder="请输入"
          value="{{ d.params.schedulingplanId || '' }}"
          autocomplete="off"
          class="layui-input"
          lay-verify="required"
          {{# if( d.params.schedulingplanId != null && d.params.schedulingplanId != ''){ }}
		  {{="disabled"}}
          {{# } }}
          />
        </script>
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">排班计划名称<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="schedulingplanName"
            placeholder="请输入"
            value="{{ d.params.schedulingplanName || '' }}"
            lay-verify="required"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">班组<span class="required">*</span></label>
      <div class="layui-input-inline">
      <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchTeam"
            lay-verify="required"
            readonly 
            placeholder="请选择"
            value="{{ d.params.teamName || '' }}"
			id="teamId"
            lay-options="{split: true}"
            class="layui-input"
          />

          <input
            type="text"
            value="{{ d.params.teamId || '' }}"
			name="teamId"
            class="layui-input layui-hide"
          />
      </script>
      </div>
    </div> 
  </div>
 
 <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">轮班方式<span class="required">*</span></label>
      <div class="layui-input-inline">
      <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchRsway"
            lay-verify="required"
            readonly 
            placeholder="请选择"
            value="{{ d.params.rswayName || '' }}"
            id="rswayId"
            lay-options="{split: true}"
            class="layui-input"
          />

          <input
            type="text"
            value="{{ d.params.rswayId || '' }}"
			name="rswayId"
            class="layui-input layui-hide"
          />
      </script>
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">倒班方式<span class="required">*</span></label>
      <div class="layui-input-inline">
      <script type="text/html" template>
          <input
            type="text"
            lay-affix="search"
            lay-filter="searchSwway"
            lay-verify="required"
            readonly 
            placeholder="请选择"
            value="{{ d.params.swwayName || '' }}"
            id="swwayId"
            lay-options="{split: true}"
            class="layui-input"
          />

          <input
            type="text"
            value="{{ d.params.swwayId || '' }}"
			name="swwayId"
            class="layui-input layui-hide"
          />
      </script>
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">轮班时长<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="number"
 			id="rshours"
            name="rshours"
            placeholder="请输入"
            value="{{ d.params.rshours || '' }}"
            lay-verify="required"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div> 
  </div>

   <div class="layui-form-item">
     <div class="layui-inline">
      <label class="layui-form-label">开始时间</label>
      <div class="layui-input-inline"> 
          <input
            type="text"
			id="ID-laydate-begintime" 
            name="begintime"
            placeholder="yyyy-MM-dd HH:mm:ss" 
            autocomplete="off"
            class="layui-input"
          /> 
      </div>
    </div> 
    
     <div class="layui-inline">
      <label class="layui-form-label">结束时间</label>
      <div class="layui-input-inline"> 
       <input
            type="text"
			id="ID-laydate-endtime" 
            name="endtime"
            placeholder="yyyy-MM-dd HH:mm:ss" 
            autocomplete="off"
            class="layui-input"
          /> 
      </div>
    </div> 
  
  </div>
  
  
  <div class="layui-form-item"> 
      <label class="layui-form-label">备注</label>
      <div class="layui-input-block">
        <script type="text/html" template>
        <textarea type="text" name="remark" autocomplete="off" class="layui-textarea">
{{ d.params.remark || '' }}</textarea
        </script> 
    </div>
    
  </div>
  <div class="layui-form-item">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input
        type="button"
        id="zkmes-schedulingmgmt-schedulingplan-form-submit"
        lay-submit
        lay-filter="zkmes-schedulingmgmt-schedulingplan-form-submit"
        value="确认"
        class="layui-btn"
      />
    </div>
  </div>
</div>

<script type="text/html" template lay-done="layui.data.sendZkmesInvmgmtProductreceiveEditFormParams(d.params)"></script>

<script>
  layui.data.sendZkmesInvmgmtProductreceiveEditFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
      	util = layui.util,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form, 
        laydate = layui.laydate,
        xmSelect = layui.xmSelect;
 
       
      //team/////////////////////////////////////////
      form.on("input-affix(searchTeam)", function (data) {
          admin.popup({
              title: "选择班组",
              area: "1500px",
              offset: "110px",
              id: "popup-zkmes-schedulingmgmt-schedulingplan-form-team",
              success: function (layero, index) {
                  view(this.id)
                      .render("zkmes/schedulingmgmt/schedulingplan/team-form")
                      .done(function () {
                          form.render(null, "zkmes-schedulingmgmt-schedulingplan-team-form");
                          //提交
                          form.on(
                              "submit(zkmes-schedulingmgmt-schedulingplan-team-form-submit)",
                              function (data) {
                                  var field = data.field; //获取提交的字段
                                  console.log(field,'999');
                                  form.val("zkmes-schedulingmgmt-schedulingplan-form", field);
                                  $("#teamId").val(field.teamName);
                                  layer.msg("选择成功");
                                  layer.close(index); //执行关闭
                              }
                          );
                      });
              },
          });
      });
 
      form.on("input-affix(searchRsway)", function (data) {
          admin.popup({
              title: "选择轮班方式",
              area: "1500px",
              offset: "110px",
              id: "popup-zkmes-schedulingmgmt-schedulingplan-form-rsway",
              success: function (layero, index) {
                  view(this.id)
                      .render("zkmes/schedulingmgmt/schedulingplan/rsway-form")
                      .done(function () {
                          form.render(null, "zkmes-schedulingmgmt-schedulingplan-rsway-form");
                          //提交
                          form.on(
                              "submit(zkmes-schedulingmgmt-schedulingplan-rsway-form-submit)",
                              function (data) {
                                  var field = data.field; //获取提交的字段
                                  
                                  
                                  form.val("zkmes-schedulingmgmt-schedulingplan-form", field);
                                  $("#rswayId").val(field.rswayName);
                                  layer.msg("选择成功");
                                  layer.close(index); //执行关闭
                              }
                          );
                      });
              },
          });
      });
      
      //swway/////////////////////////////////////////
      form.on("input-affix(searchSwway)", function (data) {
          admin.popup({
              title: "选择倒班方式",
              area: "1500px",
              offset: "110px",
              id: "popup-zkmes-schedulingmgmt-schedulingplan-form-swway",
              success: function (layero, index) {
                  view(this.id)
                      .render("zkmes/schedulingmgmt/schedulingplan/swway-form")
                      .done(function () {
                          form.render(null, "zkmes-schedulingmgmt-schedulingplan-swway-form");
                          //提交
                          form.on(
                              "submit(zkmes-schedulingmgmt-schedulingplan-swway-form-submit)",
                              function (data) {
                                  var field = data.field; //获取提交的字段
                                  form.val("zkmes-schedulingmgmt-schedulingplan-form", field);
                                  $("#swwayId").val(field.swwayName);
                                  layer.msg("选择成功");
                                  layer.close(index); //执行关闭
                              }
                          );
                      });
              },
          });
      });
      
      $("#rshours").on("input", function(e){
      	//alert(e.delegateTarget.value);
      })
     
      laydate.render({
    	    elem: '#ID-laydate-begintime',
    	    value: params.begintime,
    	    isInitValue: true,
    	    type: 'datetime',
    	    fullPanel: true,
    	    done: function(value, date, endDate){
    	    	 //console.log(value); // 日期字符，如： 2017-08-18
    	    	 // console.log(date); // 包含年月日时分秒各项值的对象
    	    	 // console.log(endDate); // 结束日期时间对象，当设置 range 时才会返回。对象成员同上。
    	    	 
    	    	// var rshours = $("#rshours").val();
    	    	// var currentDate = new Date(value);
    	    	// currentDate.setHours(currentDate.getHours() + parseInt(rshours));
    	    	// var result = util.toDateString(currentDate);
    	    	// $("#endtime").val(result);
    				 
    	    	}
    	  });
      
      
      laydate.render({
  	    elem: '#ID-laydate-endtime',
  	    value: params.endtime,
  	    isInitValue: true,
  	    type: 'datetime',
  	    fullPanel: true,
  	    done: function(value, date, endDate){
  	    	 //console.log(value); // 日期字符，如： 2017-08-18
  	    	 // console.log(date); // 包含年月日时分秒各项值的对象
  	    	 // console.log(endDate); // 结束日期时间对象，当设置 range 时才会返回。对象成员同上。
  	    	 
  	    	// var rshours = $("#rshours").val();
  	    	// var currentDate = new Date(value);
  	    	// currentDate.setHours(currentDate.getHours() + parseInt(rshours));
  	    	// var result = util.toDateString(currentDate);
  	    	// $("#endtime").val(result);
  				 
  	    	}
  	  });
      form.render(null);
    });
  };

  layui.use(["admin", "form", "common"], function () {
    var $ = layui.$,
      util = layui.util,
      admin = layui.admin,
      common = layui.common,
      view = layui.view,
      table = layui.table,
      laydate = layui.laydate,
      form = layui.form;


    
    
    
    // 渲染
   /*  laydate.render({
      elem: '#ID-laydate-begintime',
      type: 'datetime',
      fullPanel: true
    }); */
 
    
  });
</script>
