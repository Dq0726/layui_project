<div
  class="layui-form"
  lay-filter="zkmes-equipmentmgmt-maintenance-equipmentarchives-form"
  style="padding: 10px 30px 0 0"
>
  <div class="layui-form-item">
    <div class="layui-inline">
      <label class="layui-form-label">设备序列号</label>
      <div class="layui-input-inline">
        <input
          type="text"
          id="equipmentSn" 
          placeholder="请输入"
          autocomplete="off"
          class="layui-input"
        />
      </div>
    </div>

    <div class="layui-inline">
      <label class="layui-form-label">设备名称</label>
      <div class="layui-input-inline">
        <input
          type="text"
          id="equipmentarchivesName" 
          placeholder="请输入"
          autocomplete="off"
          class="layui-input"
        />
      </div>
    </div>
    <div
      class="layui-inline zkmes-equipmentmgmt-maintenance-equipmentarchives-form-search"
    >
      <div class="layui-input-inline">
        <button class="layui-btn" data-type="reload">搜索</button>
      </div>
    </div>
  </div>
  
  
  
  
  
  
  
  
  
  
  
  <div class="layui-form-item layui-hide">
  
   <!-- 设备点检单id maintenance_id-->
    <div class="layui-inline">
      <label class="layui-form-label">设备编码</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="maintenanceId"
            value="{{ d.params.maintenanceId || '' }}"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  
  
  <!-- 设备id equipmentarchives_id-->
    <div class="layui-inline">
      <label class="layui-form-label">设备ID</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentarchivesId"
            value="{{ d.params.equipmentarchivesId || '' }}"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备名称 equipmentName-->
    <div class="layui-inline">
      <label class="layui-form-label">设备名称</label>
      <div class="layui-input-inline">
        <script type="text/html" template>   
		  <input
            type="text"
            name="equipmentarchivesName"
            value="{{ d.params.equipmentarchivesName || '' }}" 
            disabled
            autocomplete="off"
            class="layui-input"
          /> 
        </script>
      </div>
    </div>
    
     
    <!-- 设备序列号 equipment_sn-->
    <div class="layui-inline">
      <label class="layui-form-label">设备序列号</label>
      <div class="layui-input-inline">
        <script type="text/html" template> 

          <input
            type="text"
            name="equipmentSn"
            value="{{ d.params.equipmentSn || '' }}" 
            disabled
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
     
    
    <!-- 车间 workshop-->
    <div class="layui-inline">
      <label class="layui-form-label">车间</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workshopName"
            disabled
            value="{{ d.params.workshopName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
    <!-- 工作站 workstation-->
    <div class="layui-inline">
      <label class="layui-form-label">工作站</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workstationName"
            disabled
            value="{{ d.params.workstationName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>
  <div class="layui-form-item layui-hide">
    <!-- 型号 model-->
    <div class="layui-inline">
      <label class="layui-form-label">型号</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text" 
            name="model"
            disabled
            value="{{ d.params.model || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 规格 spec-->
    <div class="layui-inline">
      <label class="layui-form-label">规格</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="spec"
            disabled
            value="{{ d.params.spec || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备状态 equipmentStatus-->
    <div class="layui-inline">
      <label class="layui-form-label">设备状态</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentstatusName"
            disabled
            value="{{ d.params.equipmentstatusName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>
  
  


  <div class="layui-form-item">
    <table
      id="zkmes-equipmentmgmt-maintenance-equipmentarchives-form-table"
      lay-filter="zkmes-equipmentmgmt-maintenance-equipmentarchives-form-table"
    ></table>
    <script
      type="text/html"
      id="zkmes-equipmentmgmt-maintenance-equipmentarchives-form-toolbar-head"
    >
    </script>
  </div>

  <div class="layui-form-item layui-hide">
    <label class="layui-form-label"></label>
    <div class="layui-input-inline">
      <input
        type="button"
        id="zkmes-equipmentmgmt-maintenance-equipmentarchives-form-submit"
        lay-submit
        lay-filter="zkmes-equipmentmgmt-maintenance-equipmentarchives-form-submit"
        value="确认"
        class="layui-btn"
      />
    </div>
  </div>
</div>

<script>
  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      table = layui.table,
      form = layui.form;

    active = {
      reload: function () {
        var equipmentarchivesId = $("#equipmentarchivesId");
        //执行重载
        table.reloadData(
          "zkmes-equipmentmgmt-maintenance-equipmentarchives-form-table",
          {
            page: {
              curr: 1, //重新从第 1 页开始
            },
            where: {
              equipmentarchivesId: equipmentarchivesId.val(),
            },
          }
        );
      },
    };

    $(".zkmes-equipmentmgmt-maintenance-equipmentarchives-form-search .layui-btn").on(
      "click",
      function () {
        var type = $(this).data("type");
        active[type] ? active[type].call(this) : "";
      }
    );

    var prefix = "zkmes/equipmentmgmt/equipmentarchives";

    table.render({
      elem: "#zkmes-equipmentmgmt-maintenance-equipmentarchives-form-table",
      url: prefix + "/list",
      toolbar: "#zkmes-equipmentmgmt-maintenance-equipmentarchives-form-toolbar-head",
      page: true,
      defaultToolbar: [
        "filter",
        "print",
        "exports",
        {
          title: "提示",
          layEvent: "LAYTABLE_TIPS",
          icon: "layui-icon-tips",
        },
      ],
      height: "full-350",
      cols: [
        [
        	{ field: "equipmentarchivesId", title: "设备编码" },
            { field: "equipmentarchivesName", title: "设备名称" },
            { field: "equipmentSn", title: "设备序列号" },
            { field: "equipmenttypeName", title: "设备类型" }, 
            { field: "model", title: "型号" },
            { field: "spec", title: "规格" },
            { field: 'remark', title: '备注' }  
          , { field: 'createTime', title: '创建时间' }
        ],
      ],
    });

    //触发行双击事件
    table.on(
      "rowDouble(zkmes-equipmentmgmt-maintenance-equipmentarchives-form-table)",
      function (obj) {
        // console.log(obj.tr) //得到当前行元素对象
        //console.log(obj.data) //得到当前行数据

        var submit = $(
          "#zkmes-equipmentmgmt-maintenance-equipmentarchives-form-submit"
        );
        var data = form.val(
          "zkmes-equipmentmgmt-maintenance-equipmentarchives-form",
          JSON.parse(JSON.stringify(obj.data))
        );
        // form.render();

        //alert(JSON.stringify(data));

        submit.trigger("click");
      }
    );
  });
</script>
