<div class="layui-form" lay-filter="zkmes-equipmentmgmt-pointinspection-form" style="padding: 10px 30px 0 0">
  <div class="layui-form-item">
  
   <!-- 设备点检单id pointinspection_id-->
    <div class="layui-inline layui-hide">
      <label class="layui-form-label">设备编码</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="pointinspectionId"
            value="{{ d.params.pointinspectionId || '' }}"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  
  
  <!-- 设备id equipmentarchives_id-->
    <div class="layui-inline layui-hide">
      <label class="layui-form-label">设备ID</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentarchivesId"
            value="{{ d.params.equipmentarchivesId || '' }}"
            placeholder="请输入" 
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备名称 equipmentName-->
    <div class="layui-inline">
      <label class="layui-form-label">设备名称<span class="required">*</span></label>
      <div class="layui-input-inline">
        <script type="text/html" template>
					{{# if(d.params.pointinspectionId != null && d.params.pointinspectionId != '' ){ }}  
					<input
            type="text" 
            lay-affix="search"
            lay-filter="searchEquipment" 
            disabled
            placeholder="请选择"
            value="{{ d.params.equipmentarchivesName || '' }}" 
 					  name="equipmentarchivesName" 
            lay-options="{split: true}"
            class="layui-input"
            lay-verify="required"
          /> 
					{{# }else { }}
						 <input
            type="text"
            lay-affix="search"
            lay-filter="searchEquipment" 
            disabled
            placeholder="请选择"
            value="{{ d.params.equipmentarchivesName || '' }}" 
 					  name="equipmentarchivesName" 
            lay-options="{split: true}"
            class="layui-input"
            lay-verify="required"
          /> 


					{{# }  }}
        </script>
      </div>
    </div>
    
     
    <!-- 设备序列号 equipment_sn-->
    <div class="layui-inline">
      <label class="layui-form-label">设备序列号</label>
      <div class="layui-input-inline">
        <script type="text/html" template> 

          <input
            type="text"
            name="equipmentSn"
            value="{{ d.params.equipmentSn || '' }}" 
            disabled
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
     
    
    <!-- 车间 workshop-->
    <div class="layui-inline">
      <label class="layui-form-label">车间</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workshopName"
            disabled
            value="{{ d.params.workshopName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
    <!-- 工作站 workstation-->
    <div class="layui-inline">
      <label class="layui-form-label">工作站</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="workstationName"
            disabled
            value="{{ d.params.workstationName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>
  <div class="layui-form-item">
    <!-- 型号 model-->
    <div class="layui-inline">
      <label class="layui-form-label">型号</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text" 
            name="model"
            disabled
            value="{{ d.params.model || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 规格 spec-->
    <div class="layui-inline">
      <label class="layui-form-label">规格</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="spec"
            disabled
            value="{{ d.params.spec || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>

    <!-- 设备状态 equipmentStatus-->
    <div class="layui-inline">
      <label class="layui-form-label">设备状态</label>
      <div class="layui-input-inline">
        <script type="text/html" template>
          <input
            type="text"
            name="equipmentstatusName"
            disabled
            value="{{ d.params.equipmentstatusName || '' }}"
            autocomplete="off"
            class="layui-input"
          />
        </script>
      </div>
    </div>
  </div>

  <div class="layui-form-item">
    <div class="layui-tab layui-tab-brief">
      <ul class="layui-tab-title">
        <li class="layui-this">点检信息</li>
      </ul>
      <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
          <div class="layui-form-item">
            <!-- 检测项目 testitems-->
            <label class="layui-form-label">检测项目</label>
            <div class="layui-input-block">
               <script type="text/html" template>
                  <input
                    type="text" 
                    name="testitems"
                    placeholder="请输入"
                    value="{{ d.params.testitems || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script>
            </div>
          </div>
          
          
          <div class="layui-form-item">
            <!-- 检测方法 testmethod-->
            <label class="layui-form-label">检测方法</label>
            <div class="layui-input-block">
              <script type="text/html" template>
                <textarea type="text" name="testmethod" autocomplete="off" class="layui-textarea" >{{ d.params.testmethod || '' }}</textarea >
              </script>
            </div>
          </div>

          <div class="layui-form-item">
            <!-- 点检最近日期 pointInspectionDate-->
            <div class="layui-inline">
              <label class="layui-form-label">检测日期</label>
              <div class="layui-input-inline">
                <input
                  type="text"
                  id="ID-laydate-testdate"
                  placeholder="请输入"
                  name="testdate"
                  autocomplete="off"
                  class="layui-input"
                />
              </div>
            </div>
            <!-- 点检员 tester-->
            <div class="layui-inline">
              <label class="layui-form-label">检测员</label>
              <div class="layui-input-inline">
                <script type="text/html" template>
                  <input
                    type="text" 
                    name="tester"
                    placeholder="请输入"
                    value="{{ d.params.tester || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script>
              </div>
            </div>
            <!-- 点检结果 testresult-->
            <div class="layui-inline">
              <label class="layui-form-label">检测结果</label>
              <div class="layui-input-inline">
                <script type="text/html" template>
                  <input
                    type="text" 
                    name="testresult"
                    placeholder="请输入"
                    value="{{ d.params.testresult || '' }}"
                    autocomplete="off"
                    class="layui-input"
                  />
                </script>
              </div>
            </div>
          </div>
        </div>
        <div class="layui-form-item">
          <label class="layui-form-label"></label>
          <div class="layui-input-inline">
            <input
              type="button"
              id="zkmes-equipmentmgmt-pointinspection-form-submit"
              lay-submit
              lay-filter="zkmes-equipmentmgmt-pointinspection-form-submit"
              value="确认"
              class="layui-btn"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script
  type="text/html"
  template
  lay-done="layui.data.sendZkmesInvmgmtpointinspectionEditFormParams(d.params)"
></script>

<script>
  layui.data.sendZkmesInvmgmtpointinspectionEditFormParams = function (params) {
    layui.use(["admin", "form", "xmSelect"], function () {
      var $ = layui.$,
        admin = layui.admin,
        view = layui.view,
        table = layui.table,
        form = layui.form,
        laydate = layui.laydate,
        util = layui.util,
        xmSelect = layui.xmSelect;
      
       
      
      //////////////////////////////////////////////
      form.on("input-affix(searchEquipment)", function (data) {
        admin.popup({
          title: "选择车间",
          area: "1500px",
          offset: "100px",
          id: "popup-zkmes-equipmentmgmt-pointinspection-equipmentarchives",
          success: function (layero, index) {
            view(this.id)
              .render("zkmes/equipmentmgmt/pointinspection/equipmentarchives-form")
              .done(function () {
                form.render(
                  null,
                  "zkmes-equipmentmgmt-pointinspection-equipmentarchives-form"
                );
                //提交
                form.on(
                  "submit(zkmes-equipmentmgmt-pointinspection-equipmentarchives-form-submit)",
                  function (data) {
                    var field = data.field; //获取提交的字段 
                    
                    //提交 Ajax 成功后，关闭当前弹层并重载表格
                    form.val(
                      "zkmes-equipmentmgmt-pointinspection-form",
                      field
                    );
                    layer.close(index); //执行关闭
                  }
                );
              });
          },
        });
      });
      
      
      /* 点检最近日期 */
      laydate.render({
        elem: "#ID-laydate-testdate",
        type: "datetime",
        value: params.testdate,
        isInitValue: true,
        fullPanel: true,
      });
        

      form.render(null);
    });
  };

  layui.use(["admin", "form"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      table = layui.table,
      laydate = layui.laydate,
      form = layui.form;

   
  });
</script>
