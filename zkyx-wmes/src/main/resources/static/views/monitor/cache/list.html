<title>在线用户</title>

<div class="layui-card layadmin-header">
  <div class="layui-breadcrumb" lay-filter="breadcrumb">
    <a lay-href="">主页</a>
    <a><cite>系统监控</cite></a>
    <a><cite>缓存列表</cite></a>
  </div>
</div>

<div class="layui-fluid">
  <div class="layui-row layui-col-space10">
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">CPU</div>
        <div class="layui-card-body"> 
         <table id="monitor-cache-table" width="100%" lay-filter="monitor-cache-table"></table>
        </div> 
      </div> 
    </div>
    <div class="layui-col-md6">
      <div class="layui-card">
        <div class="layui-card-header">键名列表</div>
        <div class="layui-card-body">
          <table id="monitor-cache-key-table" lay-filter="monitor-cache-key-table"></table>
      </div>
    </div>
  </div> 
 </div>
</div>

<script>
  layui.use(["admin", "table"], function () {
    var $ = layui.$,
      admin = layui.admin,
      view = layui.view,
      table = layui.table,
      form = layui.form;

      var prefix = "monitor/cache";
     
      table.render({
        elem: '#monitor-cache-table'
        , url: prefix + '/getNames'   
        , height: 'full-200'
        , cols: [[  
        	{ type: 'numbers' } 
          , { field: 'cacheName', title: '缓存名称' } 
          , { field: 'remark', title: '备注' } 
      
        ]],
        parseData: function (res) {  
            return {
              code: res.code, // 解析接口状态
              msg: res.msg, // 解析提示文本
        //      count: res.total, // 解析数据长度
              data: res.data, // 解析数据列表
            };
          }
      });
 
    //触发行单击事件
      table.on('row(monitor-cache-table)', function(obj){ 
          console.log(obj.data) //得到当前行数据
        
      //  alert(obj.data);
          table.reloadData('monitor-cache-key-table', {
        	 url: prefix + '/getKeys/' + obj.data.cacheName
        });  
 
      });
    
    
      
      
      table.render({
          elem: '#monitor-cache-key-table'
          , data: []   
          , height: 'full-200'
          , cols: [[  
          	{ type: 'numbers' } 
            , { field: 'keyName', title: '缓存键名' }  
          ]],
          parseData: function (res) { 
        	  
        	  
        	  for ( value of res.data) {
        		  
        		   value 
        		}
        	  
        	  
              return {
                code: res.code, // 解析接口状态
                msg: res.msg, // 解析提示文本
          //      count: res.total, // 解析数据长度
                data: res.data, // 解析数据列表
              };
            }
        });
      
      
 
  });
</script>
